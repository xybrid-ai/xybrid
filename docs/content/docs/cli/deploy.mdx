---
title: xybrid deploy
description: Publish bundles to a registry
---

Publish packaged models and pipelines to a registry.

## Usage

```bash
xybrid deploy <bundle.xyb> --registry <type>
xybrid deploy <bundle.xyb> --registry <type> -p <path>
```

## Arguments

| Argument | Description |
|----------|-------------|
| `<bundle.xyb>` | Path to the bundle to publish |

## Options

| Option | Short | Default | Description |
|--------|-------|---------|-------------|
| `--registry` | | `local` | Registry type: `local` or `remote` |
| `--registry-path` | `-p` | Platform default | Path or URL to registry |

## Registry Types

| Type | Description | Path Format |
|------|-------------|-------------|
| `local` | Local filesystem cache | `~/.xybrid/registry/` |
| `remote` | HTTP-based registry | `https://registry.example.com` |

## Behavior

1. Loads the bundle file
2. Validates manifest and hash
3. Stores via configured registry
4. Updates registry index

For remote registries, the bundle is uploaded via HTTP and also cached locally.

## Examples

### Deploy to local registry

```bash
xybrid deploy whisper-tiny.xyb --registry local
```

Stores at `~/.xybrid/registry/whisper-tiny/<version>/<platform>/`

### Deploy to custom local path

```bash
xybrid deploy whisper-tiny.xyb --registry local -p ~/.xybrid/registry
```

### Deploy to remote registry

```bash
xybrid deploy whisper-tiny.xyb --registry remote -p https://registry.xybrid.dev
```

## Local Registry Structure

After deployment, the local registry contains:

```
~/.xybrid/registry/
├── index.json                          # Bundle index
├── whisper-tiny/
│   └── 1.0/
│       └── macos-arm64/
│           └── whisper-tiny.xyb
└── kokoro-82m/
    └── 0.1/
        └── macos-arm64/
            └── kokoro-82m.xyb
```

## Index Format

The `index.json` tracks all deployed bundles:

```json
{
  "whisper-tiny/1.0/macos-arm64": {
    "model_id": "whisper-tiny",
    "version": "1.0",
    "target": "macos-arm64",
    "size_bytes": 12345678,
    "path": "/Users/.../.xybrid/registry/whisper-tiny/1.0/macos-arm64/whisper-tiny.xyb"
  }
}
```

## Authentication

Remote registries may require authentication. Configure in `~/.config/xybrid/config.yml`:

```yaml
registry:
  name: "prod-remote"
  base_url: "https://registry.xybrid.dev/"
  auth:
    type: bearer
    token: "${XYBRID_REGISTRY_TOKEN}"
```

## Workflow

Complete build and deploy workflow:

```bash
# Package the model
xybrid pack whisper-tiny --version 1.2.0 --target ios-arm64

# Deploy to local registry
xybrid deploy dist/whisper-tiny.xyb --registry local

# Verify deployment
ls ~/.xybrid/registry/whisper-tiny/1.2.0/ios-arm64/
```

See [Registry](/docs/overview/registry) for registry architecture details.
